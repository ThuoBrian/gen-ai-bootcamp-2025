flowchart TD
  A[User] -->|Query| B[Internet]
  B -->|Forward Request| C[Input Guardrail]
  C -->|Validate & Sanitize| D[Prompt Cache]
  D -->|Cache Hit?| E{Yes}
  E -->|Return Cached Response| Z[Response to User]
  E --|No|--> F[Retrieval-Augmented Generation]
  F -->|Retrieve External Knowledge| G[Vector Database]
  G -->|Provide Context| F
  F -->|Process Query| H[Model API]
  H -->|Generate Response| I[Output Guardrail]
  I -->|Validate & Filter Output| J[Prompt Cache]
  J -->|Store Processed Response| Z
  Z -->|Deliver Response| A
  
  subgraph Monitoring & Security
    M[Logging & Observability]
    N[Rate Limiting & Authentication]
    
  end
  H -->|Monitor Requests| M
  B -->|Validate Access| N
